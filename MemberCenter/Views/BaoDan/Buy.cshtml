@model MemberCenter.Models.BaoDanBuyViewModel
@{
    ViewBag.Title = "实价报单";
}

<h1 class="page-header">@ViewBag.Title</h1>
<div class="panel panel-default">
    <div class="panel-heading">
        PRICE DECLARATION
    </div>
    <div class="panel-body">
    @using (Html.BeginForm("Buy", "BaoDan", FormMethod.Post, new { role = "form" }))
    {
        @Html.AntiForgeryToken()
        if(!ViewData.ModelState.IsValid)
        { 
            <div class="alert alert-danger">
                @Html.ValidationSummary()
            </div>
        }

        if (ViewBag.ActionMessage != null)
        {
            <div class="alert alert-success">
                @ViewBag.ActionMessage
            </div>
        }
        <table class="table">
            <caption>联和通用积分实时价格：<b> ￥@Html.DisplayFor(m => m.CurrentCoinPrice)</b></caption>
            <tr>
                <td>可用现金：<p>￥@Html.DisplayFor(m => m.AvailableCash) </p></td>
                <td>报单价格：<p>￥@Html.DisplayFor(m => m.RequestPrice) </p></td>
                <td>报单个数：<p>@Html.DisplayFor(m => m.RequestQuantity) </p></td>
                <td>报单总额：<p>￥@Html.DisplayFor(m => m.RequestCash) </p></td>
                <td>手续费：<p>￥@Html.DisplayFor(m => m.Fee) </p></td>
                <td>消耗现金：<p>￥@Html.DisplayFor(m => m.TotalCostCash) </p></td>
                <td>成交后余额：<p>￥@Html.DisplayFor(m => m.CashLeft) </p></td>
                @if (ViewData.ModelState.IsValid && Model.RequestQuantity>0)
                { 
                    <td><button type="submit" class="btn btn-primary">报单</button></td>
                }
            </tr>
        </table>
        @Html.HiddenFor(m => m.CurrentCoinPrice)
        @Html.HiddenFor(m => m.RequestPrice)
        @Html.HiddenFor(m => m.AvailableCash)
        @Html.HiddenFor(m => m.RequestQuantity)
        @Html.HiddenFor(m => m.RequestCash)
        @Html.HiddenFor(m => m.RequestPrice)
        @Html.HiddenFor(m => m.TotalCostCash)
        @Html.HiddenFor(m => m.CashLeft)
        @Html.HiddenFor(m => m.Fee)
    }
        <!-- /.Table -->
    </div>
    <!-- /.panel-body -->
    <div class="panel-footer">
        &nbsp;
    </div>
</div>

